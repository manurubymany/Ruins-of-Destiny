<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Second Chance - Ruins of Destiny</title>
<style>
    /* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— */
    /* â•‘                    RESET E ESTILOS GLOBAIS                     â•‘ */
    /* â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    * { 
        margin: 0; 
        padding: 0; 
        box-sizing: border-box; 
        -webkit-tap-highlight-color: transparent;
    }
    
    body { 
        font-family: 'Georgia', serif; 
        overflow: hidden; 
        background: #000;
        position: fixed;
        width: 100%;
        height: 100vh;
        touch-action: none;
        color: #5A4632;
    }

    /* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— */
    /* â•‘                     CONTAINER PRINCIPAL                        â•‘ */
    /* â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #game-container { 
        position: relative; 
        width: 100vw; 
        height: 100vh; 
        overflow: hidden; 
    }

    /* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— */
    /* â•‘                      CAMADA DE FUNDO                           â•‘ */
    /* â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #bg-layer { 
        position: absolute; 
        top: 0; 
        left: 0; 
        width: 100%; 
        height: 100%; 
        background-size: cover; 
        background-position: center center; 
        background-repeat: no-repeat;
        transition: opacity 0.8s ease;
    }
    
    /* AnotaÃ§Ã£o: OtimizaÃ§Ã£o para fundos em mobile */
    @media (max-width: 768px) {
        #bg-layer {
            background-size: cover;
            background-position: center 30%;
        }
    }

    /* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— */
    /* â•‘                   CAMADA DO PERSONAGEM (SPRITE)                â•‘ */
    /* â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #char-layer { 
        position: absolute; 
        bottom: 0; 
        left: 0;
        right: 0;
        width: 100%; 
        height: 70vh; 
        display: flex; 
        align-items: flex-end; 
        justify-content: center; 
        pointer-events: none;
        overflow: hidden;
    }

    #char-layer img { 
        height: 100%;
        width: auto;
        max-width: none;
        object-fit: cover;
        object-position: center bottom;
        opacity: 0; 
        transition: opacity 0.5s ease;
    }
    
    /* AnotaÃ§Ã£o: Ajuste para personagens que ficam muito largos */
    @media (max-width: 480px) {
        #char-layer img {
            width: 100%;
            height: auto;
            max-height: 70vh;
            object-fit: contain;
        }
    }

    #char-layer img.show { 
        opacity: 1; 
    }

    /* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— */
    /* â•‘                    TELA DE LOGIN/MENU INICIAL                  â•‘ */
    /* â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #main-menu { 
        position: fixed; 
        top: 0; 
        left: 0; 
        width: 100%; 
        height: 100%; 
        background-image: url('assets/chars/login.png'); 
        background-size: cover; 
        background-position: center;
        display: flex; 
        align-items: center; 
        justify-content: center; 
        z-index: 1000;
        overflow: hidden;
    }

    /* AnotaÃ§Ã£o: Gradiente radial para efeito vinheta */
    #main-menu::before { 
        content: ''; 
        position: absolute; 
        width: 100%; 
        height: 100%; 
        background: radial-gradient(circle at top, rgba(230,199,122,0.3), rgba(90,70,50,0.5));
        animation: particles 8s infinite;
    }

    @keyframes particles { 
        0%, 100% { opacity: 0.3; } 
        50% { opacity: 0.6; } 
    }

    #main-menu.hidden {
        display: none;
    }

    /* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— */
    /* â•‘                      CONTEÃšDO DO MENU                          â•‘ */
    /* â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .menu-content { 
        background: rgba(250,246,238,0.95); 
        border: 3px solid #E6C77A; 
        border-radius: 20px; 
        padding: 30px 25px; 
        box-shadow: 0 10px 40px rgba(230,199,122,0.5);
        text-align: center; 
        position: relative; 
        z-index: 2;
        width: 85%;
        max-width: 400px;
        animation: fadeIn 1s ease;
    }

    @keyframes fadeIn { 
        from { opacity: 0; transform: scale(0.9); } 
        to { opacity: 1; transform: scale(1); } 
    }

    /* AnotaÃ§Ã£o: TÃ­tulo principal */
    .game-title { 
        font-size: 28px; 
        color: #5A4632; 
        margin-bottom: 10px; 
        text-shadow: 2px 2px 4px rgba(230,199,122,0.3);
        line-height: 1.2;
    }

    /* AnotaÃ§Ã£o: SubtÃ­tulo */
    .subtitle { 
        font-size: 14px; 
        color: #8B7355; 
        margin-bottom: 20px; 
    }

    /* AnotaÃ§Ã£o: Campo de entrada do nome */
    #playerName { 
        width: 100%; 
        padding: 12px 15px; 
        font-size: 16px; 
        border: 2px solid #E6C77A; 
        border-radius: 12px; 
        background: #FAF6EE; 
        color: #5A4632; 
        margin-bottom: 20px;
        font-family: 'Georgia', serif;
    }

    #playerName:focus { 
        outline: none; 
        border-color: #D4AF37; 
        box-shadow: 0 0 15px rgba(230,199,122,0.5);
    }

    #playerName::placeholder {
        color: rgba(90,70,50,0.5);
    }

    /* AnotaÃ§Ã£o: BotÃ£o iniciar jogo */
    #startBtn { 
        width: 100%; 
        padding: 14px; 
        font-size: 18px; 
        font-weight: bold; 
        color: #5A4632; 
        background: linear-gradient(135deg, #F3E5B5, #E6C77A); 
        border: 2px solid #E6C77A; 
        border-radius: 12px; 
        cursor: pointer;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }

    #startBtn:active { 
        transform: scale(0.97); 
        box-shadow: 0 8px 20px rgba(230,199,122,0.6);
    }

    .menu-footer {
        margin-top: 15px;
        font-size: 12px;
        color: #8B7355;
        font-style: italic;
    }

    /* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— */
    /* â•‘                    CAIXA DE DIÃLOGO (TEXTBOX)                  â•‘ */
    /* â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #textbox { 
        position: fixed; 
        bottom: 0; 
        left: 0;
        right: 0;
        width: 100%;
        background: rgba(250,246,238,0.98); 
        border-top: 3px solid #E6C77A;
        border-top-left-radius: 20px;
        border-top-right-radius: 20px;
        padding: 20px 20px 25px 20px;
        box-shadow: 0 -8px 30px rgba(0,0,0,0.4);
        display: none;
        max-height: 35vh;
        overflow: hidden;
        z-index: 100;
    }

    #textbox.hidden {
        display: none;
    }

    /* AnotaÃ§Ã£o: Nome do personagem que estÃ¡ falando */
    #speaker { 
        font-size: 18px; 
        font-weight: bold; 
        color: #5A4632; 
        margin-bottom: 10px; 
        text-shadow: 1px 1px 2px rgba(230,199,122,0.4);
    }

    /* AnotaÃ§Ã£o: ConteÃºdo do diÃ¡logo */
    #text { 
        font-size: 15px; 
        line-height: 1.6; 
        color: #5A4632; 
        margin-bottom: 15px;
        max-height: 18vh;
        overflow-y: auto;
        padding-right: 5px;
        white-space: pre-wrap;
        word-wrap: break-word;
    }
    
    /* AnotaÃ§Ã£o: Melhor legibilidade em telas pequenas */
    @media (max-height: 700px) {
        #text {
            font-size: 14px;
            line-height: 1.5;
            max-height: 15vh;
        }
    }

    /* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— */
    /* â•‘                    BOTÃƒO PRÃ“XIMO                               â•‘ */
    /* â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .next-indicator { 
        float: right; 
        padding: 10px 20px; 
        font-size: 15px; 
        color: #5A4632; 
        background: linear-gradient(135deg, #F3E5B5, #E6C77A); 
        border: 2px solid #E6C77A; 
        border-radius: 10px; 
        cursor: pointer;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }

    .next-indicator:active { 
        transform: scale(0.95);
    }

    /* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— */
    /* â•‘                    CONTAINER DE ESCOLHAS                       â•‘ */
    /* â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .choice-container { 
        position: fixed; 
        bottom: 15px; 
        left: 5%;
        right: 5%;
        width: 90%;
        display: none; 
        flex-direction: column; 
        gap: 12px;
        max-height: 60vh;
        overflow-y: auto;
        padding-bottom: 10px;
        z-index: 200;
    }

    /* AnotaÃ§Ã£o: BotÃ£o de escolha individual */
    .choice { 
        background: rgba(250,246,238,0.98); 
        border: 3px solid #E6C77A; 
        border-radius: 15px; 
        padding: 18px 20px; 
        font-size: 16px; 
        line-height: 1.4;
        color: #5A4632; 
        cursor: pointer; 
        text-align: center;
        touch-action: manipulation;
        box-shadow: 0 4px 15px rgba(230,199,122,0.3);
        transition: all 0.2s ease;
        font-family: 'Georgia', serif;
        font-weight: normal;
    }

    .choice:active { 
        background: linear-gradient(135deg, #F3E5B5, #E6C77A);
        transform: scale(0.98);
    }

    /* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— */
    /* â•‘                    INDICADOR DE ROTA                           â•‘ */
    /* â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #route-indicator {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(250,246,238,0.95);
        border: 2px solid #E6C77A;
        border-radius: 10px;
        padding: 10px 15px;
        font-size: 14px;
        color: #5A4632;
        font-weight: bold;
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: 50;
    }

    #route-indicator.visible {
        opacity: 1;
    }

    /* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— */
    /* â•‘                    NOTIFICAÃ‡Ã•ES (TOAST)                        â•‘ */
    /* â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #toast {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(250,246,238,0.95);
        color: #5A4632;
        padding: 12px 25px;
        border-radius: 10px;
        border: 2px solid #E6C77A;
        z-index: 1001;
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
        font-size: 14px;
        font-weight: bold;
    }

    #toast.show {
        opacity: 1;
    }

    /* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— */
    /* â•‘                    SCROLLBAR CUSTOMIZADA                       â•‘ */
    /* â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    ::-webkit-scrollbar { 
        width: 6px; 
    }
    
    ::-webkit-scrollbar-track { 
        background: rgba(230,199,122,0.2); 
    }
    
    ::-webkit-scrollbar-thumb { 
        background: #E6C77A; 
        border-radius: 3px; 
    }
</style>
</head>
<body>
    <audio id="bgm" loop></audio>
    <audio id="sfx"></audio>
    <div id="toast"></div>

    <div id="game-container">
        <div id="bg-layer">
            <img id="bg" alt="CenÃ¡rio">
        </div>
        <div id="sprite-layer">
            <img id="charImg" alt="Personagem">
        </div>
        <div id="overlay"></div>

        <div id="ui-layer">
            <div id="route-indicator">
                <span id="route"></span>
            </div>

            <div id="main-menu">
                <div class="menu-content">
                    <h1 class="game-title">Second Chance</h1>
                    <p class="subtitle">Ruins of Destiny</p>
                    <input id="playerName" type="text" placeholder="Digite seu nome..." maxlength="20">
                    <br>
                    <button id="startBtn">ComeÃ§ar Aventura</button>
                    <div class="menu-footer">Manu&Sam Studios</div>
                    <span class="menu-ornament-bottom menu-ornament-bottom-left"></span>
                    <span class="menu-ornament-bottom menu-ornament-bottom-right"></span>
                </div>
            </div>

            <div id="textbox" class="hidden">
                <div class="speaker-container">
                    <span id="speaker"></span>
                </div>
                <div class="text-container">
                    <p id="text"></p>
                </div>
                <div class="next-indicator">â–¼</div>
            </div>

            <div id="choices" class="choice-container"></div>

            <div class="game-controls hidden">
                <button class="control-btn" onclick="saveGame()">ğŸ’¾ Salvar</button>
                <button class="control-btn" onclick="loadGame()">ğŸ“‚ Carregar</button>
            </div>
        </div>
    </div>

    <script>
        let playerName = "";
        let state = "menu";
        let isTyping = false;
        let currentRoute = "";
        let affection = { lucien: 0, eryon: 0, kaiden: 0, aelion: 0 };

        const bgm = document.getElementById("bgm");
        const sfx = document.getElementById("sfx");
        const bgImg = document.getElementById("bg");
        const charImg = document.getElementById("charImg");
        const speakerBox = document.getElementById("speaker");
        const textBox = document.getElementById("text");
        const textbox = document.getElementById("textbox");
        const choicesBox = document.getElementById("choices");
        const mainMenu = document.getElementById("main-menu");
        const routeIndicator = document.getElementById("route-indicator");
        const routeDisplay = document.getElementById("route");

        function typeText(element, text) {
            element.innerText = "";
            isTyping = true;
            let i = 0;
            function type() {
                if (i < text.length) {
                    element.innerText += text.charAt(i);
                    i++;
                    setTimeout(type, 30);
                } else {
                    isTyping = false;
                }
            }
            type();
        }

        function playMusic(filename) {
            if (!filename) return;
            const newSrc = "assets/audio/" + filename + ".mp3";
            if (bgm.getAttribute("src") === newSrc) return;
            bgm.src = newSrc;
            bgm.play().catch(() => {});
        }

        function setBackground(filename) {
            if (filename) {
                bgImg.style.opacity = "0";
                setTimeout(() => {
                    bgImg.src = encodeURI("assets/chars/" + filename + ".png");
                    bgImg.style.opacity = "1";
                }, 300);
            }
        }

        function setCharacter(filename) {
            if (!filename) {
                charImg.style.opacity = "0";
                return;
            }
            charImg.style.opacity = "0";
            setTimeout(() => {
                charImg.src = encodeURI("assets/chars/" + filename + ".png");
                charImg.style.opacity = "1";
            }, 250);
        }

function showText(speaker, dialogue) {
    // Substitui "Eu" pelo nome do jogador automaticamente
    let displaySpeaker = speaker === "Eu" ? playerName : speaker;
    
    speakerBox.innerText = displaySpeaker || "";
    speakerBox.style.display = displaySpeaker ? "block" : "none";
    typeText(textBox, dialogue.replace(/Eu/g, playerName));
    textbox.classList.remove("hidden");
}

        function updateRoute(routeName) {
            if (routeName) {
                currentRoute = routeName;
                routeDisplay.innerText = "Rota: " + routeName;
                routeIndicator.classList.add("visible");
            }
        }

        function showChoices(choices) {
            choicesBox.innerHTML = "";
            choices.forEach(choice => {
                const btn = document.createElement("button");
                btn.className = "choice";
                btn.innerText = choice.text;
                btn.onclick = (e) => {
                    e.stopPropagation();
                    if (choice.affect) affection[choice.affect] += (choice.value || 0);
                    choicesBox.innerHTML = "";
                    loadScene(choice.next);
                };
                choicesBox.appendChild(btn);
            });
        }

        function showToast(message) {
            const toast = document.getElementById("toast");
            toast.textContent = message;
            toast.classList.add("show");
            setTimeout(() => toast.classList.remove("show"), 3000);
        }

        const routes = {
            cena1_1: { speaker: "Eu", text: "Hoje foi uma sexta-feira complicada. Muita demanda para entregar aquele projeto de sistema.", char: "escritÃ³rio1", music: "escritÃ³rio", next: "cena1_2" },
            cena1_2: { speaker: "Eu", text: "Olho o relÃ³gio. Nossa, jÃ¡ sÃ£o 18h00. Finalmente a hora de voltar para casa. Pego minha bolsa e desligo o computador.", char: "escritÃ³rio2", next: "cena2_1" },
            cena2_1: { speaker: "Eu", text: "Nossa, que gelo que estÃ¡ hoje. Que dor de cabeÃ§a... foi muito cansativo. Parece que minha cabeÃ§a vai explodir. Vou passar na farmÃ¡cia do outro lado da avenida pegar um remÃ©dio.", char: "rua1", music: "chuva", next: "cena2_2" },
            cena2_2: { speaker: "Eu", text: "Cai um pingo de Ã¡gua no meu olho. Aii, que merda... comeÃ§ou a chover. Vou correr logo para a farmÃ¡cia.", char: "rua2", next: "cena3_1" },
            cena3_1: { speaker: "Eu", text: "Vou aproveitar e correr antes que o sinal feche. A chuva jÃ¡ engrossou, estou encharcado. Atravessando a avenida...", char: "acidente1", music: "o acidente", next: "cena3_2" },
            cena3_2: { speaker: "", text: "BAAAANG. Barulho de batida e chuva.", char: "acidente2", next: "cena3_3" },
            cena3_3: { speaker: "", text: "O mundo gira. O sangue. A dor.", char: "acidente3", next: "cena3_4" },
            cena3_4: { speaker: "", text: "Tudo fica escuro.", char: "acidente4", next: "cena4_1" },
            cena4_1: { speaker: "Eu", text: "Huum... o que estÃ¡ acontecendo? NÃ£o estou enxergando. EstÃ¡ tudo escuro. AlguÃ©m consegue me ouvir?", char: "vazio1", music: "menu", next: "cena4_2" },
            cena4_2: { speaker: "", text: "Uma luz surge ao longe, crescendo gradualmente.", char: "vazio2", next: "cena4_3" },
            cena4_3: { speaker: "", text: "Ela toma a forma de uma mulher.", char: "vazio3", next: "cena4_4" },
            cena4_4: { speaker: "Aleia", text: "Eu sou Aleia, responsÃ¡vel por cuidar das reencarnaÃ§Ãµes de quem nÃ£o conseguiu cumprir seu propÃ³sito.", char: "vazio3", next: "cena4_5" },
            cena4_5: { speaker: "Eu", text: "Eu morri...?", char: "vazio3", next: "cena4_6" },
            cena4_6: { speaker: "Aleia", text: "Sim. Um motorista perdeu o controle na chuva.", char: "vazio3", next: "cena4_7" },
            cena4_7: { speaker: "Eu", text: "E meus gatos...?", char: "vazio3", next: "cena4_8" },
            cena4_8: { speaker: "Aleia", text: "EstÃ£o bem. Tudo foi resolvido.", char: "vazio3", next: "cena4_9" },
            cena4_9: { speaker: "Aleia", text: "Do outro lado do portÃ£o estÃ¡ sua prÃ³xima reencarnaÃ§Ã£o. LÃ¡ vocÃª terÃ¡ a chance de cumprir sua missÃ£o.", char: "vazio3", next: "cena4_10" },
            cena4_10: { speaker: "Eu", text: "O quÃª?! Espera, eu nem entendi ainda!", char: "vazio4", next: "cena5_1" },
            cena5_1: { speaker: "Eu", text: "Ah... que claro... estÃ¡ tudo embaÃ§ado.", char: "ruinas1", music: "passos na floresta", next: "cena5_2" },
            cena5_2: { speaker: "Eu", text: "ComeÃ§o a enxergar ao redor. Que mulher estranha... nÃ£o explicou nada. SerÃ¡ que tem reclamaÃ§Ã£o aqui no cÃ©u? Rs. Bom, eu morro mas nÃ£o perdo a piada.", char: "ruinas2", next: "cena5_3" },
            cena5_3: { speaker: "Eu", text: "Acordei em meio a uma floresta. Um antigo palÃ¡cio em ruÃ­nas, estÃ¡tuas de deuses destruÃ­das. Passo por um portÃ£o quebrado.", char: "ruinas5", next: "cena6_1" },
            cena6_1: { speaker: "Eu", text: "ComeÃ§o a andar em meio Ã s Ã¡rvores mas parece estar escurecendo. Meus pÃ©s doem. Continuo andando por mais umas 2hrs e escuto o barulho de o que parece ser um rio. Chego atÃ© um rio. Bom, sempre dizem que onde tem agua deve ter vida. SerÃ¡ que eu devo descer o rio, qual caminho devo seguir?", char: "caminho2", next: "cena6_2" },
            cena6_2: { speaker: "", text: "Qual serÃ¡ sua escolha?", char: "caminho2", choices: [
                { text: "Seguir o rio, atÃ© a cidade", next: "lucien_1", affect: "lucien", value: 1 },
                { text: "Ficar aqui e descansar nos pÃ©s da Ã¡rvore", next: "eryon_1", affect: "eryon", value: 1 },
                { text: "Entrar e seguir o caminho pela floresta", next: "kaiden_1", affect: "kaiden", value: 1 },
                { text: "Voltar para as ruÃ­nas de onde vim", next: "aelion_1", affect: "aelion", value: 1 }
            ]},
            lucien_1: { route: "Lucien", speaker: "Eu", text: "Caminho lentamente pela margem do rio. A Ã¡gua reflete a luz fraca da lua, ondulando como prata lÃ­quida. Meus pÃ©s doem, minhas roupas ainda estÃ£o Ãºmidas da chuva.", char: "lucien1", music: "gÃ³tica do lucien", next: "lucien_2" },
             lucien_2: { speaker: "Eu", text: "O som da correnteza me acompanha por um tempo atÃ© que, entre as Ã¡rvores, percebo algo diferente. Pedras alinhadas. Um caminho antigo, parcialmente tomado pelo musgo.", char: "lucien2", next: "lucien_3" },
             lucien_3: { speaker: "Eu", text: "Sigo por ele com cautela. ApÃ³s alguns minutos, as Ã¡rvores se abrem. Diante de mim, surge um castelo enorme, envolto por nÃ©voa e silÃªncio.", char: "lucien3", next: "lucien_4" },
             lucien_4: { speaker: "Eu", text: "Um castelo?! Ã“timo... considerando meu histÃ³rico recente, provavelmente vou acabar queimada numa fogueira. O portÃ£o principal estÃ¡ entreaberto.", char: "lucien3", choices: [
                    { text: "NÃ£o tenho opÃ§Ã£o, preciso de abrigo.", next: "lucien_5" },
                    { text: "Isso Ã© claramente uma pÃ©ssima ideia... mas vou entrar.", next: "lucien_5" },
                    { text: "Se eu morrer de novo, vou reclamar com Aleia.", next: "lucien_5" }
            ]},
            lucien_5: { speaker: "Eu", text: "O interior Ã© escuro, mas nÃ£o abandonado. HÃ¡ mÃ³veis cobertos por poeira, tapeÃ§arias antigas rasgadas pelo tempo. Um arrepio percorre minha espinha. Tem alguÃ©m aqui?", char: "lucien5", next: "lucien_6" },
            lucien_6: { speaker: "Eu", text: "Nenhuma resposta. Exausta, encontro um sofÃ¡ antigo perto de uma lareira apagada. Me deito, o corpo pesado demais para continuar alerta. Meus olhos se fecham.", char: "lucien6", next: "lucien_7" },
            lucien_7: { speaker: "Eu", text: "Sinto. Antes mesmo de ouvir. Uma presenÃ§a pesada, dominante. Abro os olhos lentamente. Uma sombra estÃ¡ no canto do salÃ£o.", char: "presenÃ§a2", next: "lucien_8" },
            lucien_8: { speaker: "Lucien", text: "Quem Ã© vocÃª... e o que faz em minha casa?", char: "lucien7", next: "lucien_9" },
            lucien_9: { speaker: "Eu", text: "Ele se aproxima. Quando a luz o alcanÃ§a, vejo olhos vermelhos, cabelo escuro, pele pÃ¡lida. O ar ao redor dele carrega um cheiro suave de rosas vermelhas.", char: "lucien8", next: "lucien_10" },
            lucien_10: { speaker: "Eu", text: "M-me desculpe... Eu nÃ£o quis invadir, achei que estivesse abandonado.", char: "presenÃ§a3", next: "lucien_11" },
            lucien_11: { speaker: "Lucien", text: "Ele me observa como um predador analisa a presa. Que azar o seu. Vai morrer esta noite.", char: "lucien9", choices: [
                { text: "Espere! Eu posso ir embora agora!", next: "lucien_12" },
                { text: "Se vai me matar, ao menos diga seu nome.", next: "lucien_12" },
                { text: "VocÃª nÃ£o parece tÃ£o assustador assim.", next: "lucien_12" }
            ]},
            lucien_12: { speaker: "Eu", text: "Ele se move rÃ¡pido demais. Sinto mÃ£os frias segurando meus braÃ§os. Antes que eu possa gritar, uma dor aguda explode em meu pescoÃ§o.", char: "presenÃ§a5", next: "lucien_13" },
            lucien_13: { speaker: "Eu", text: "A-ah...! O mundo gira. O sangue. A dor. E entÃ£oâ€” UMA LUZ BRANCA IRROMPE DE MIM.", char: "presenÃ§a7", next: "lucien_14" },
            lucien_14: { speaker: "Eu", text: "O salÃ£o se ilumina violentamente. O estranho Ã© arremessado contra uma coluna de pedra. SilÃªncio absoluto.", char: "presenÃ§a8", next: "lucien_15" },
            lucien_15: { speaker: "Eu", text: "Respiro com dificuldade. Minhas mÃ£os ainda brilham fracamente.", char: "presenÃ§a9", next: "lucien_16" },
            lucien_16: { speaker: "Lucien", text: "Ele se levanta lentamente. VocÃª... nÃ£o Ã© humana.", char: "lucien10", next: "lucien_17" },
            lucien_17: { speaker: "Lucien", text: "Meu nome Ã© Lucien. Aquela luz... Ã© Origem.", char: "lucien11", next: "lucien_18" },
            lucien_18: { speaker: "Eu", text: "Aleia...", char: "presenÃ§a11", next: "lucien_19" },
            lucien_19: { speaker: "Lucien", text: "Ao ouvir o nome, Lucien endurece. EntÃ£o foi ela que te enviou.", char: "lucien11", choices: [
                { text: "VocÃª conhece Aleia?", next: "lucien_20" },
                { text: "Ela nÃ£o me explicou nada!", next: "lucien_20" },
                { text: "Se isso Ã© culpa dela, eu tambÃ©m quero respostas.", next: "lucien_20" }
            ]},
            lucien_20: { speaker: "Lucien", text: "VocÃª nÃ£o deveria estar aqui. Mas agora que estÃ¡... nÃ£o posso te deixar na floresta. Fique. Ao menos esta noite.", char: "presenÃ§a12", next: "lucien_21" },
            lucien_21: { speaker: "Eu", text: "AdormeÃ§o novamente. O mundo desaparece. Estou no vazio. Aleia surge diante de mim.", char: "sonho1", next: "lucien_22" },
            lucien_22: { speaker: "Aleia", text: "O Ciclo das ReencarnaÃ§Ãµes foi quebrado. VocÃª Ã© o Fragmento da Origem.", char: "sonho2", next: "lucien_23" },
            lucien_23: { speaker: "Aleia", text: "NÃ£o Ã© viver. Ã‰ decidir quem merece continuar existindo.", char: "sonho3", choices: [
                { text: "Eu nÃ£o pedi por isso.", next: "lucien_24" },
                { text: "E se eu me recusar?", next: "lucien_24" },
                { text: "E Lucien... faz parte disso?", next: "lucien_24" }
            ]},
            lucien_24: { speaker: "Aleia", text: "Aleia apenas sorri. Suas escolhas jÃ¡ comeÃ§aram.", char: "sonho3", next: "lucien_25" },
            lucien_25: { speaker: "Eu", text: "Acordo sobressaltada. Lucien estÃ¡ sentado ao lado da cama. VocÃª sabia.", char: "lucien20", next: "lucien_26" },
            lucien_26: { speaker: "Lucien", text: "Sim. Reencarnadas despertam monstros.", char: "lucien20", next: "lucien_27" },
            lucien_27: { speaker: "Eu", text: "VocÃª estÃ¡ com fome?", char: "lucien20", next: "lucien_28" },
            lucien_28: { speaker: "Lucien", text: "Lucien fecha os olhos por um instante. Sempre. Ele levanta a mÃ£o lentamente. Posso?", char: "lucien22", choices: [
                { text: "Sim.", next: "lucien_29" },
                { text: "SÃ³ se prometer nÃ£o me machucar.", next: "lucien_29" },
                { text: "NÃ£o... ainda nÃ£o.", next: "lucien_30" }
             ]},
            lucien_29: { speaker: "Eu", text: "Se permitido, ele toca minha mÃ£o. Uma marca antiga surge, pulsando entre nÃ³s. O castelo treme.", char: "lucien23", next: "lucien_31" },
            lucien_30: { speaker: "Lucien", text: "Ele respeita sua escolha e aguarda. Estarei aqui quando estiver pronta.", char: "lucien20", next: "lucien_31" },
            lucien_31: { speaker: "Lucien", text: "CaÃ§adores de Origem. Sombras se movem atrÃ¡s das paredes.", char: "lucien26", next: "lucien_32" },
            lucien_32: { speaker: "Lucien", text: "Se fizer isso... nÃ£o hÃ¡ volta.", char: "lucien25", choices: [
                { text: "BeijÃ¡-lo", next: "lucien_final" },
                { text: "Fugir", next: "lucien_ending_2" },
                { text: "Recuar", next: "lucien_ending_3" }
            ]},
            lucien_final: { speaker: "Eu", text: "Eu jÃ¡ morri uma vez. NÃ£o vou viver fugindo. Eu o beijo. Sangue e luz se unem. Um sÃ­mbolo eterno se forma no ar. As sombras gritam e sÃ£o julgadas. Aleia surge. VocÃª escolheu amar. Eu escolhi nÃ£o decidir sozinha. Lucien segura minha mÃ£o. EntÃ£o o Ciclo serÃ¡ transformado. Os CaÃ§adores desaparecem. O sol nasce sobre o castelo. Lucien caminha Ã  luz do dia. Minha eternidade... agora tem um comeÃ§o. O castelo floresce.", char: "lucien_final4", end: true, endText: "ğŸ©¸ FIM DA ROTA LUCIEN - Obrigado por jogar!" },
            lucien_ending_2: { speaker: "Eu", text: "Eu corro. Pela porta, pela floresta, fugindo do castelo e do destino que me espera.", char: "lucien25", end: true, endText: "ğŸ©¸ FIM DA ROTA LUCIEN - Liberdade Conquistada" },
            lucien_ending_3: { speaker: "Lucien", text: "VocÃª recua. Lucien abaixa a mÃ£o, pacientemente. Esperarei pelo tempo que precisar.", char: "lucien20", end: true, endText: "ğŸ©¸ FIM DA ROTA LUCIEN - Incerteza Permanece" },
            eryon_1: { route: "Eryon", speaker: "Eu", text: "Vou descansar no pÃ© da Ã¡rvore. AmanhÃ£ eu caminho um pouco mais... Afinal, hoje nÃ£o vai dar mais nada. Deito aos pÃ©s da grande Ã¡rvore ancestral, abraÃ§ando meus prÃ³prios braÃ§os.", char: "eryon1", music: "trilha do aelion", next: "eryon_2" },
            eryon_2: { speaker: "Eu", text: "O frio da noite comeÃ§a a incomodar. Fecho os olhos. O cansaÃ§o vence.", char: "eryon1", next: "eryon_3" },
            eryon_3: { speaker: "Estranho", text: "No meio do sono, algo muda. O frio desaparece. Meu corpo comeÃ§a a esquentar, como se estivesse envolvido por uma manta invisÃ­vel. Coitadinha... Mais um pouco e teria congelado.", char: "eryon2", next: "eryon_4" },
            eryon_4: { speaker: "Eu", text: "Abro os olhos lentamente. Ele estÃ¡ ali, ajoelhado ao meu lado. Seu corpo emana uma aura dourada, quente e suave. Ele Ã© lindo. Como o prÃ³prio sol em forma humana, iluminando a noite. Estou sonhando?", char: "eryon2", next: "eryon_5" },
            eryon_5: { speaker: "Estranho", text: "Ele sorri com gentileza. Se for um sonho... por que seu coraÃ§Ã£o estÃ¡ tÃ£o acelerado?", char: "eryon2", choices: [
                { text: "Me aproximar instintivamente do calor", next: "eryon_6" },
                { text: "Recuar assustada", next: "eryon_7" },
                { text: "Se for sonho, nÃ£o me acorde.", next: "eryon_6" }
            ]},
            eryon_6: { speaker: "Estranho", text: "Ele sorri. Meu nome Ã© Eryon.", char: "eryon3", next: "eryon_8" },
            eryon_7: { speaker: "Estranho", text: "Ele compreende seu medo. NÃ£o tema. Estou aqui para proteger. Meu nome Ã© Eryon.", char: "eryon3", next: "eryon_8" },
            eryon_8: { speaker: "Eu", text: "Digo meu nome.", char: "eryon3", next: "eryon_9" },
            eryon_9: { speaker: "Eryon", text: "Eu sei. A luz reconhece aquilo que carrega a Origem.", char: "eryon3", next: "eryon_10" },
            eryon_10: { speaker: "Eu", text: "Meu coraÃ§Ã£o dispara. VocÃª Ã©... o quÃª exatamente?", char: "eryon2", next: "eryon_11" },
            eryon_11: { speaker: "Eryon", text: "Ele se senta ao meu lado, encostando as costas na Ã¡rvore. Alguns me chamam de guardiÃ£o. Outros... de Deus da Luz.", char: "eryon3", choices: [
                { text: "VocÃª veio me julgar?", next: "eryon_12" },
                { text: "EntÃ£o por que estÃ¡ aqui comigo?", next: "eryon_12" },
                { text: "Isso explica o brilho exagerado.", next: "eryon_12" }
            ]},
            eryon_12: { speaker: "Eu", text: "Ah... Claro. Faz todo sentido.", char: "eryon3", next: "eryon_13" },
            eryon_13: { speaker: "Eu", text: "O vento sopra forte. Eryon ergue a mÃ£o. Uma barreira dourada envolve a Ã¡rvore.", char: "eryon4", next: "eryon_14" },
            eryon_14: { speaker: "Eu", text: "Isso Ã© lindo...", char: "eryon4", next: "eryon_15" },
            eryon_15: { speaker: "Eryon", text: "Ã‰ apenas calor... e intenÃ§Ã£o. Ele me observa em silÃªncio por alguns segundos. VocÃª nÃ£o pertence a este mundo. Mas carrega algo que atÃ© os deuses temem.", char: "eryon4", next: "eryon_16" },
            eryon_16: { speaker: "Eu", text: "Eu sÃ³ queria descansar.", char: "eryon4", next: "eryon_17" },
            eryon_17: { speaker: "Eryon", text: "Ã€s vezes, Ã© assim que o destino comeÃ§a.", char: "eryon4", choices: [
                { text: "VocÃª sempre ajuda humanos assim?", next: "eryon_18" },
                { text: "Posso ficar aqui mais um pouco?", next: "eryon_18" },
                { text: "VocÃª parece... sozinho.", next: "eryon_19" }
            ]},
            eryon_18: { speaker: "Eryon", text: "Ele me observa. Talvez apenas vocÃª.", char: "eryon5", next: "eryon_20" },
            eryon_19: { speaker: "Eryon", text: "Talvez. AtÃ© agora. Mas sua presenÃ§a muda isso.", char: "eryon5", next: "eryon_20" },
            eryon_20: { speaker: "Eryon", text: "Eryon hesita, depois estende a mÃ£o. Se eu tocar vocÃª... posso quebrar leis antigas.", char: "eryon5", next: "eryon_21" },
            eryon_21: { speaker: "Eu", text: "E se eu deixar?", char: "eryon5", next: "eryon_22" },
            eryon_22: { speaker: "Eryon", text: "Ele engole em seco.", char: "eryon5", choices: [
                { text: "Permitir e segurar a mÃ£o dele", next: "eryon_23" },
                { text: "Permitir, mas pedir cuidado", next: "eryon_23" },
                { text: "Recusar por medo", next: "eryon_ending_early" }
            ]},
            eryon_23: { speaker: "Eu", text: "Quando o toque acontece, um sÃ­mbolo de luz aparece brevemente entre nossas mÃ£os. O ar treme.", char: "eryon5", next: "eryon_24" },
            eryon_24: { speaker: "Eryon", text: "...isso Ã© perigoso.", char: "eryon6", next: "eryon_25" },
            eryon_25: { speaker: "Eryon", text: "Eryon se afasta um pouco. Preciso te contar algo. Antes de vocÃª... eu jÃ¡ havia caÃ­do.", char: "eryon6", next: "eryon_26" },
            eryon_26: { speaker: "Eryon", text: "Os Deuses decidiram que aquela civilizaÃ§Ã£o devia desaparecer. Eu vi esperanÃ§a onde eles viram erro.", char: "eryon6", next: "eryon_27" },
            eryon_27: { speaker: "Eu", text: "O que vocÃª fez?", char: "eryon6", next: "eryon_28" },
            eryon_28: { speaker: "Eryon", text: "Salvei vidas. Escolhi humanos.", char: "eryon6", next: "eryon_29" },
            eryon_29: { speaker: "Eu", text: "E isso foi proibido?", char: "eryon6", next: "eryon_30" },
            eryon_30: { speaker: "Eryon", text: "Amar humanos Ã© visto como falha.", char: "eryon7", choices: [
                { text: "EntÃ£o valeu a pena.", next: "eryon_31" },
                { text: "VocÃª se arrepende?", next: "eryon_31" },
                { text: "Eu tambÃ©m te escolheria.", next: "eryon_31" }
            ]},
            eryon_31: { speaker: "Eu", text: "O cÃ©u escurece. SÃ­mbolos dourados rasgam o ar.", char: "eryon7", next: "eryon_32" },
            eryon_32: { speaker: "", text: "Vozes: O Deus CaÃ­do deve ser apagado. A humana serÃ¡ julgada.", char: "eryon8", next: "eryon_33" },
            eryon_33: { speaker: "Eryon", text: "Eryon se coloca Ã  minha frente. NÃ£o toquem nela.", char: "eryon8", next: "eryon_34" },
            eryon_34: { speaker: "Eu", text: "NÃ£o. Dou um passo Ã  frente. Desta vez... eu escolho. A Origem desperta em mim.", char: "eryon8", next: "eryon_35" },
            eryon_35: { speaker: "Aleia", text: "Aleia surge. EntÃ£o vocÃª chegou Ã  sua decisÃ£o.", char: "eryon9", choices: [
                { text: "Amor nÃ£o Ã© falha.", next: "eryon_36" },
                { text: "Deuses nÃ£o devem decidir sozinhos.", next: "eryon_36" },
                { text: "Eu escolho Eryon.", next: "eryon_36" }
            ]},
            eryon_36: { speaker: "Eu", text: "A luz explode. Os sÃ­mbolos divinos se quebram.", char: "eryon9", next: "eryon_37" },
            eryon_37: { speaker: "Aleia", text: "Fragmento da Origem... faÃ§a seu julgamento.", char: "eryon9", next: "eryon_38" },
            eryon_38: { speaker: "Eu", text: "Deuses que negam escolha... nÃ£o merecem governar sozinhos. A luz envolve Eryon. As marcas de puniÃ§Ã£o desaparecem.", char: "eryon10", next: "eryon_39" },
            eryon_39: { speaker: "Eryon", text: "...o que vocÃª fez?", char: "eryon10", next: "eryon_40" },
            eryon_40: { speaker: "Eu", text: "Te devolvi a escolha. O amanhecer surge. NÃ£o divino. Humano.", char: "eryon10", next: "eryon_41" },
            eryon_41: { speaker: "Eryon", text: "Eryon estÃ¡ ao meu lado. Sua luz agora Ã© suave, constante. Eu posso ficar. Onde vocÃª estiver. Ele segura minha mÃ£o.", char: "eryon11", next: "eryon_42" },
            eryon_42: { speaker: "Eryon", text: "NÃ£o sou mais um deus completo. E vocÃª nÃ£o Ã© apenas humana.", char: "eryon11", next: "eryon_43" },
            eryon_43: { speaker: "Eu", text: "E isso Ã© ruim?", char: "eryon11", next: "eryon_final" },
            eryon_final: { speaker: "Eryon", text: "Ã‰ perfeito. Nos beijamos sob a Ã¡rvore ancestral. A floresta floresce.", char: "eryon11", end: true, endText: "â˜€ï¸ FIM DA ROTA ERYON - Obrigado por jogar!" },
            eryon_ending_early: { speaker: "Eryon", text: "Ele respeita seu medo e recua. Estarei aqui quando estiver pronta.", char: "eryon4", end: true, endText: "â˜€ï¸ FIM DA ROTA ERYON - Medo Permanece" },
            kaiden_1: { route: "Kaiden", speaker: "Eu", text: "Entro mais fundo na floresta. As Ã¡rvores ficam mais densas, os galhos se entrelaÃ§am acima da minha cabeÃ§a, quase bloqueando a lua. Ã“timo... Se eu morrer de novo, dessa vez vai ser comida por algum monstro da floresta.", char: "kaiden1", music: "mystical japanese", next: "kaiden_2" },
            kaiden_2: { speaker: "Eu", text: "O ar fica estranho. Silencioso demais. Dou mais alguns passos. EntÃ£oâ€” Risadas. Baixas. PrÃ³ximas.", char: "kaiden1", next: "kaiden_3" },
            kaiden_3: { speaker: "Estranho", text: "Uma figura surge sentada tranquilamente em um galho de Ã¡rvore Ã  frente. Cabelos claros com tons avermelhados, olhos dourados brilhando no escuro, um sorriso divertido demais para aquele lugar. AtrÃ¡s dele... caudas. Uma, duas... vÃ¡rias se movendo lentamente.", char: "kaiden2", next: "kaiden_4" },
            kaiden_4: { speaker: "Estranho", text: "VocÃª entrou bem fundo no meu territÃ³rio, humana.", char: "kaiden2", next: "kaiden_5" },
            kaiden_5: { speaker: "Eu", text: "TÃ¡, isso definitivamente nÃ£o estava no manual de sobrevivÃªncia pÃ³s-morte.", char: "kaiden2", next: "kaiden_6" },
            kaiden_6: { speaker: "Estranho", text: "Ele pula do galho com leveza e para a poucos passos de mim. Kitsune. Mas vocÃª pode me chamar de Kaiden.", char: "kaiden2", choices: [
                { text: "Eu me perdi, nÃ£o queria invadir nada.", next: "kaiden_7" },
                { text: "VocÃª pretende me matar?", next: "kaiden_7" },
                { text: "E vocÃª sempre recebe visitas assim?", next: "kaiden_7" }
            ]},
            kaiden_7: { speaker: "Kaiden", text: "Kaiden inclina a cabeÃ§a, analisando-me como um brinquedo novo. Interessante... VocÃª nÃ£o cheira a medo como deveria.", char: "kaiden3", next: "kaiden_8" },
            kaiden_8: { speaker: "Kaiden", text: "Ele se aproxima. Perto demais. Cheira a... algo antigo.", char: "kaiden3", next: "kaiden_9" },
            kaiden_9: { speaker: "Eu", text: "Afasta. Dou um passo para trÃ¡s. NÃ£o encosta.", char: "kaiden2", next: "kaiden_10" },
            kaiden_10: { speaker: "Kaiden", text: "Ele ri. Calma. Se eu quisesse te machucar, jÃ¡ teria feito.", char: "kaiden2", choices: [
                { text: "EntÃ£o por que estÃ¡ me seguindo?", next: "kaiden_11" },
                { text: "Eu nÃ£o confio em vocÃª.", next: "kaiden_11" },
                { text: "VocÃª parece perigoso demais pra sorrir assim.", next: "kaiden_11" }
            ]},
            kaiden_11: { speaker: "Kaiden", text: "Kaiden estala os dedos. O cenÃ¡rio muda. A floresta se transforma em um caminho iluminado por lanternas, Ã¡rvores floridas, um vilarejo ao longe.", char: "kaiden4", next: "kaiden_12" },
            kaiden_12: { speaker: "Eu", text: "O que vocÃª fez?", char: "kaiden4", next: "kaiden_13" },
            kaiden_13: { speaker: "Kaiden", text: "Facilitei sua vida. A floresta real te mataria em horas. Ele se aproxima novamente. Mas ilusÃµes... eu domino.", char: "kaiden4", choices: [
                { text: "Isso Ã© lindo...", next: "kaiden_14" },
                { text: "Ã‰ falso.", next: "kaiden_14" },
                { text: "VocÃª quer algo de mim.", next: "kaiden_14" }
            ]},
            kaiden_14: { speaker: "Kaiden", text: "Kaiden suspira teatralmente. Claro que quero. Todo mundo quer algo. Ele segura meu queixo com dois dedos, obrigando-me a encarÃ¡-lo.", char: "kaiden5", next: "kaiden_15" },
            kaiden_15: { speaker: "Kaiden", text: "VocÃª nÃ£o Ã© humana comum. Tem cheiro de Origem.", char: "kaiden5", next: "kaiden_16" },
            kaiden_16: { speaker: "Eu", text: "Aleia...", char: "kaiden5", next: "kaiden_17" },
            kaiden_17: { speaker: "Kaiden", text: "Os olhos dele brilham intensamente. EntÃ£o Ã© isso. A cadelinha do Ciclo.", char: "kaiden5", choices: [
                { text: "NÃ£o me chama assim!", next: "kaiden_18" },
                { text: "VocÃª sabe mais do que estÃ¡ dizendo.", next: "kaiden_18" },
                { text: "E vocÃª? O que Ã©?", next: "kaiden_18" }
            ]},
            kaiden_18: { speaker: "Kaiden", text: "A ilusÃ£o se desfaz. A floresta volta, mais escura. As caudas de Kaiden se abrem completamente â€” nove.", char: "kaiden6", next: "kaiden_19" },
            kaiden_19: { speaker: "Kaiden", text: "Eu sou o erro que os deuses fingem nÃ£o ver. Um kitsune que se recusou a servir.", char: "kaiden6", next: "kaiden_20" },
            kaiden_20: { speaker: "Eu", text: "Servir quem?", char: "kaiden6", next: "kaiden_21" },
            kaiden_21: { speaker: "Kaiden", text: "O Ciclo. Aleia. Todos eles. Ele se inclina atÃ© seu ouvido. E vocÃª... pode quebrar tudo isso.", char: "kaiden6", choices: [
                { text: "Eu nÃ£o confio em vocÃª.", next: "kaiden_ending_1" },
                { text: "Se vocÃª me usar, eu te destruo.", next: "kaiden_ending_1" },
                { text: "E se eu quiser quebrar o Ciclo?", next: "kaiden_22" }
            ]},
            kaiden_22: { speaker: "Kaiden", text: "Kaiden segura minha mÃ£o. A energia dele Ã© caÃ³tica, quente, instÃ¡vel. Cuidado. Kitsunes mentem... mas nÃ£o sobre desejo.", char: "kaiden7", next: "kaiden_23" },
            kaiden_23: { speaker: "Eu", text: "VocÃª estÃ¡ brincando comigo?", char: "kaiden7", next: "kaiden_24" },
            kaiden_24: { speaker: "Kaiden", text: "Ele sorri. Sempre. Mas nÃ£o solta.", char: "kaiden7", choices: [
                { text: "Puxar a mÃ£o de volta", next: "kaiden_ending_1" },
                { text: "Deixar ele se aproximar", next: "kaiden_25" },
                { text: "BeijÃ¡-lo primeiro", next: "kaiden_25" }
            ]},
            kaiden_25: { speaker: "Kaiden", text: "A floresta se agita. Uma presenÃ§a maior observa. Eles sentiram vocÃª.", char: "kaiden8", next: "kaiden_26" },
            kaiden_26: { speaker: "Eu", text: "Quem?", char: "kaiden8", next: "kaiden_27" },
            kaiden_27: { speaker: "Kaiden", text: "Todos. Deuses, guardiÃµes... e coisas piores. Ele se aproxima, sÃ©rio pela primeira vez. Se ficar comigo... nÃ£o haverÃ¡ redenÃ§Ã£o fÃ¡cil.", char: "kaiden8", choices: [
                { text: "Eu fico.", next: "kaiden_romance_1" },
                { text: "Eu uso vocÃª, mas nÃ£o confio.", next: "kaiden_ending_1" },
                { text: "Eu vou sozinha.", next: "kaiden_ending_1" }
            ]},
            kaiden_romance_1: { speaker: "Kaiden", text: "A floresta treme levemente, como se tivesse sentido minha decisÃ£o. Interessante... vocÃª escolheu ficar. Isso significa que vocÃª entende o perigo que estÃ¡ aceitando.", char: "kaiden10", next: "kaiden_romance_2" },
            kaiden_romance_2: { speaker: "Eu", text: "Eu jÃ¡ morri uma vez. NÃ£o vou fugir da segunda.", char: "kaiden10", next: "kaiden_romance_3" },
            kaiden_romance_3: { speaker: "Kaiden", text: "Ele sorri, mostrando dentes ligeiramente afiados. EntÃ£o venha. Minha floresta agora Ã© sua tambÃ©m... por enquanto.", char: "kaiden10", next: "kaiden_romance_4" },
            kaiden_romance_4: { speaker: "Kaiden", text: "Kaiden segura minha mÃ£o, guiando-me por entre Ã¡rvores que se curvam como se respeitassem sua presenÃ§a. Humanos tÃªm medo do que nÃ£o entendem... Mas vocÃª... vocÃª nÃ£o foge.", char: "kaiden11", next: "kaiden_romance_5" },
            kaiden_romance_5: { speaker: "Eu", text: "Nem vou fugir de vocÃª.", char: "kaiden11", next: "kaiden_romance_6" },
            kaiden_romance_6: { speaker: "Kaiden", text: "Ele inclina o rosto para o meu, tÃ£o prÃ³ximo que posso sentir a respiraÃ§Ã£o quente. Isso pode ser perigoso... muito perigoso.", char: "kaiden12", choices: [
                { text: "Me aproximar dele e tocar seu rosto", next: "kaiden_romance_7" },
                { text: "Me afastar, mas manter contato visual", next: "kaiden_romance_8" },
                { text: "BeijÃ¡-lo rapidamente", next: "kaiden_romance_7" }
            ]},
            kaiden_romance_7: { speaker: "Kaiden", text: "Kaiden aproxima o rosto, e nossos lÃ¡bios se encontram. A floresta ao redor parece escurecer e brilhar ao mesmo tempo.", char: "kaiden13", next: "kaiden_romance_9" },
            kaiden_romance_8: { speaker: "Kaiden", text: "Ele respeita sua cautela, mas o desejo brilha em seus olhos dourados.", char: "kaiden12", next: "kaiden_romance_9" },
            kaiden_romance_9: { speaker: "Kaiden", text: "Huu... Muito humana. E irresistÃ­vel. Sinto um arrepio que percorre todo meu corpo, e uma marca fantasmagÃ³rica surge entre nÃ³s â€” sÃ­mbolo da ligaÃ§Ã£o Kitsune-Humana.", char: "kaiden13", next: "kaiden_romance_10" },
            kaiden_romance_10: { speaker: "Eu", text: "O que... isso Ã©?", char: "kaiden13", next: "kaiden_romance_11" },
            kaiden_romance_11: { speaker: "Kaiden", text: "NÃ³s dois. Para sempre ligados... atÃ© que eu decida soltar.", char: "kaiden14", next: "kaiden_romance_12" },
            kaiden_romance_12: { speaker: "Kaiden", text: "Kaiden solta minha mÃ£o, mas mantÃ©m os olhos fixos em mim. HÃ¡ algo que vocÃª precisa saber. Eu nÃ£o sou seu herÃ³i. Eu vou te usar, manipular... mas tambÃ©m proteger.", char: "kaiden14", next: "kaiden_romance_13" },
            kaiden_romance_13: { speaker: "Kaiden", text: "E vocÃª... vai querer cada segundo disso.", char: "kaiden14", next: "kaiden_romance_14" },
            kaiden_romance_14: { speaker: "Eu", text: "Isso... Ã© amor?", char: "kaiden14", next: "kaiden_romance_15" },
            kaiden_romance_15: { speaker: "Kaiden", text: "Ele ri, som sombrio e sedutor. Amor humano? NÃ£o. Mas desejo... muito desejo.", char: "kaiden14", choices: [
                { text: "Aceitar o desejo e ficar prÃ³xima", next: "kaiden_romance_16" },
                { text: "Resistir, mas nÃ£o ir embora", next: "kaiden_romance_17" },
                { text: "Tentar fugir e testar sua reaÃ§Ã£o", next: "kaiden_ending_1" }
            ]},
            kaiden_romance_16: { speaker: "Kaiden", text: "Kaiden se senta prÃ³ximo de mim. Eu fui expulso dos CÃ©us... NÃ£o por erro... mas por ousar amar, por ousar escolher.", char: "kaiden15", next: "kaiden_romance_18" },
            kaiden_romance_17: { speaker: "Kaiden", text: "Ele aprecia sua coragem. EntÃ£o, estÃ¡ decidida?", char: "kaiden15", next: "kaiden_romance_18" },
            kaiden_romance_18: { speaker: "Eu", text: "EntÃ£o... vocÃª entende o que eu sou?", char: "kaiden15", next: "kaiden_romance_19" },
            kaiden_romance_19: { speaker: "Kaiden", text: "Mais do que qualquer deus ou guardiÃ£o. Eu vejo o Fragmento da Origem em vocÃª... E sei que juntos podemos quebrar tudo.", char: "kaiden15", next: "kaiden_romance_20" },
            kaiden_romance_20: { speaker: "Eu", text: "Quebrar tudo... como?", char: "kaiden15", next: "kaiden_romance_21" },
            kaiden_romance_21: { speaker: "Kaiden", text: "Reescrever regras. O Ciclo, os deuses, o destino. E talvez... criar nosso prÃ³prio mundo.", char: "kaiden16", next: "kaiden_romance_22" },
            kaiden_romance_22: { speaker: "Kaiden", text: "A floresta parece viva. Sombras se movem. Mas isso tem preÃ§o. Escolher ficar comigo... significa inimigos em todos os lugares. Deuses, guardiÃµes... e humanos que nÃ£o entendem.", char: "kaiden16", next: "kaiden_romance_23" },
            kaiden_romance_23: { speaker: "Kaiden", text: "VocÃª estÃ¡ pronta?", char: "kaiden16", choices: [
                { text: "Eu fico. Com vocÃª, mesmo que seja perigoso.", next: "kaiden_final" },
                { text: "Se vocÃª cair, eu caio tambÃ©m.", next: "kaiden_final" },
                { text: "Vamos quebrar tudo juntos.", next: "kaiden_final" }
            ]},
            kaiden_final: { speaker: "Kaiden", text: "Kaiden envolve-me com seus braÃ§os, suas caudas cobrindo-nos como manto protetor. EntÃ£o seja minha... atÃ© o fim. Eu prometo proteger vocÃª... mesmo que isso signifique desafiar os CÃ©us. Eu prometo... ficar com vocÃª. Ele me beija novamente. O mundo ao redor desaparece. Somente nÃ³s dois. Uma marca de ligaÃ§Ã£o brilha entre nÃ³s â€” nossa assinatura proibida. A floresta se acalma. A lua brilha sobre nÃ³s, refletindo nas caudas de Kaiden. NÃ³s quebramos regras, destruÃ­mos expectativas, desafiamos tudo... Mas estamos juntos. Mesmo que todos nos odeiem? Mesmo assim. Porque o que temos Ã© mais forte que qualquer julgamento. As caudas dele se enrolam em volta da minha cintura, nos protegendo. O Ciclo dos deuses... agora nÃ£o pode nos tocar. NÃ³s somos a nossa prÃ³pria lei.", char: "kaiden20", end: true, endText: "FIM DA ROTA KAIDEN - Obrigado por jogar!" },
            kaiden_ending_1: { speaker: "Kaiden", text: "Kaiden sorri, como se jÃ¡ esperasse por isso. Como desejar. Talvez nos encontremos novamente.", char: "kaiden6", end: true, endText: "FIM DA ROTA KAIDEN - DistÃ¢ncia Mantida" },
            aelion_1: { route: "Aelion", speaker: "Eu", text: "Decido voltar para as ruÃ­nas de onde vim. O caminho Ã© conhecido, mas ainda assim sinto a tensÃ£o de um mundo que mudou desde minha morte. Talvez aqui eu consiga me orientar melhor... Ã‰ mais seguro, pelo menos.", char: "aelion1", music: "trilha do aelion", next: "aelion_2" },
            aelion_2: { speaker: "Eu", text: "As ruÃ­nas parecem silenciosas, mas hÃ¡ um calor reconfortante no ar, como se o lugar estivesse esperando por mim.", char: "aelion1", next: "aelion_3" },
            aelion_3: { speaker: "Eu", text: "Enquanto examino as ruÃ­nas, uma luz dourada surge entre as colunas destruÃ­das.", char: "aelion2", next: "aelion_4" },
            aelion_4: { speaker: "Eu", text: "Quem estÃ¡ aÃ­?", char: "aelion2", next: "aelion_5" },
            aelion_5: { speaker: "Aelion", text: "Um homem surge gradualmente. Alto, cabelo prateado, olhos verdes profundos, armadura leve, mas imponente. SaudaÃ§Ãµes, viajante. NÃ£o teme estas ruÃ­nas, mesmo depois do que aconteceu?", char: "aelion2", next: "aelion_6" },
            aelion_6: { speaker: "Eu", text: "OlÃ¡... Eu sÃ³ queria um lugar seguro para descansar.", char: "aelion2", choices: [
                { text: "Obrigada... estou exausta e assustada.", next: "aelion_7" },
                { text: "VocÃª Ã© o rei? Parece gentil.", next: "aelion_7" },
                { text: "NÃ£o sei se posso confiar.", next: "aelion_8" }
            ]},
            aelion_7: { speaker: "Aelion", text: "EntÃ£o veio ao lugar certo. Sou Aelion, rei deste reino ancestral. Aqui vocÃª estarÃ¡ em seguranÃ§a.", char: "aelion3", next: "aelion_9" },
            aelion_8: { speaker: "Aelion", text: "Compreendo sua cautela. Tempo mostrarÃ¡ minha verdade.", char: "aelion2", next: "aelion_9" },
            aelion_9: { speaker: "Aelion", text: "Aelion conduz-me para uma pequena sala dentro das ruÃ­nas, preservada pelo tempo. HÃ¡ tapeÃ§arias antigas, livros espalhados e uma lareira acesa.", char: "aelion3", next: "aelion_10" },
            aelion_10: { speaker: "Aelion", text: "Sente-se. A comida serÃ¡ simples, mas nutritiva. E vocÃª pode descansar sem medo.", char: "aelion3", next: "aelion_11" },
            aelion_11: { speaker: "Eu", text: "Isso Ã© tÃ£o reconfortante. Sinto que finalmente posso respirar.", char: "aelion3", next: "aelion_12" },
            aelion_12: { speaker: "Aelion", text: "Aqui ninguÃ©m vai lhe fazer mal. Nem monstros, nem deuses. Apenas eu e o que este lugar guarda.", char: "aelion3", choices: [
                { text: "Posso ficar aqui por um tempo?", next: "aelion_13" },
                { text: "VocÃª sempre protege assim os que chegam?", next: "aelion_13" },
                { text: "Esse lugar... Ã© seguro por quÃª?", next: "aelion_13" }
            ]},
            aelion_13: { speaker: "Aelion", text: "Sentados prÃ³ximos Ã  lareira, Aelion observa as chamas. VocÃª carrega algo incomum. Sua energia... Ã© rara, atÃ© entre os elfos.", char: "aelion4", next: "aelion_14" },
            aelion_14: { speaker: "Eu", text: "Aleia mencionou algo sobre missÃ£o e fragmentos da Origem.", char: "aelion4", next: "aelion_15" },
            aelion_15: { speaker: "Aelion", text: "EntÃ£o sabe que o mundo Ã© maior do que parece. Mas aqui, comigo, vocÃª estarÃ¡ segura para descobrir o que deve fazer.", char: "aelion4", next: "aelion_16" },
            aelion_16: { speaker: "Eu", text: "...E vocÃª sempre protege assim?", char: "aelion4", next: "aelion_17" },
            aelion_17: { speaker: "Aelion", text: "Sempre que posso. SeguranÃ§a Ã© diferente de poder. Poder sozinho nÃ£o salva ninguÃ©m.", char: "aelion4", choices: [
                { text: "Confio em vocÃª.", next: "aelion_18" },
                { text: "Posso aprender com vocÃª?", next: "aelion_18" },
                { text: "Quero entender minha missÃ£o.", next: "aelion_18" }
            ]},
            aelion_18: { speaker: "Aelion", text: "Com o passar do tempo, sinto-me cada vez mais Ã  vontade com Aelion. Ele Ã© gentil, paciente e protetor, sem exigir nada.", char: "aelion5", next: "aelion_19" },
            aelion_19: { speaker: "Aelion", text: "HÃ¡ momentos em que atÃ© os reis precisam se conectar com o que Ã© puro. Com vocÃª... sinto que posso apenas ser eu mesmo.", char: "aelion5", next: "aelion_20" },
            aelion_20: { speaker: "Eu", text: "...Isso Ã©... reconfortante. Sinto que posso confiar em vocÃª de verdade.", char: "aelion5", next: "aelion_21" },
            aelion_21: { speaker: "Aelion", text: "Ele sorri, delicadamente, e segura minha mÃ£o. EntÃ£o estamos juntos nisso. SeguranÃ§a, compreensÃ£o e... talvez algo mais.", char: "aelion5", choices: [
                { text: "Aceitar e apertar a mÃ£o dele", next: "aelion_22" },
                { text: "Sorrir e deixar que ele segure levemente", next: "aelion_22" },
                { text: "Ficar tÃ­mida, mas nÃ£o afastar", next: "aelion_23" }
            ]},
            aelion_22: { speaker: "Aelion", text: "Aelion se aproxima, olhando-me nos olhos. Aleia disse que vocÃª carrega uma missÃ£o importante. Mas nÃ£o precisa enfrentar tudo sozinha. Eu estarei ao seu lado.", char: "aelion6", next: "aelion_24" },
            aelion_23: { speaker: "Aelion", text: "Ele pacientemente aguarda seu tempo, respeitando seu ritmo.", char: "aelion6", next: "aelion_24" },
            aelion_24: { speaker: "Eu", text: "...Isso significa muito. NÃ£o tenho que decidir tudo sozinha.", char: "aelion6", next: "aelion_25" },
            aelion_25: { speaker: "Aelion", text: "Exatamente. Passo a passo, juntos.", char: "aelion6", choices: [
                { text: "EntÃ£o vou confiar em vocÃª.", next: "aelion_26" },
                { text: "Vamos descobrir juntos.", next: "aelion_26" },
                { text: "Preciso de sua orientaÃ§Ã£o, Aelion.", next: "aelion_26" }
            ]},
            aelion_26: { speaker: "Aelion", text: "O sol nasce sobre as ruÃ­nas. As paredes antigas agora brilham com luz dourada, refletindo a natureza em volta.", char: "aelion7", next: "aelion_27" },
            aelion_27: { speaker: "Aelion", text: "O mundo lÃ¡ fora Ã© perigoso... Mas aqui vocÃª pode respirar.", char: "aelion7", next: "aelion_28" },
            aelion_28: { speaker: "Eu", text: "Com vocÃª, sinto que posso.", char: "aelion7", next: "aelion_29" },
            aelion_29: { speaker: "Aelion", text: "Ele segura minha mÃ£o com firmeza, olhando-me com ternura. EntÃ£o... fique comigo. NÃ£o apenas segura, mas confiante.", char: "aelion8", next: "aelion_30" },
            aelion_30: { speaker: "Eu", text: "Eu fico. Aqui, com vocÃª.", char: "aelion8", end: true, endText: "FIM DA ROTA AELION - Obrigado por jogar!" },
};

        function loadScene(sceneId) {
            const scene = routes[sceneId];
            if (!scene) return;
            state = sceneId;
            if (scene.route) updateRoute(scene.route);
            if (scene.char !== undefined) setCharacter(scene.char);
            if (scene.music) playMusic(scene.music);
            if (scene.text) showText(scene.speaker, scene.text);
            choicesBox.innerHTML = "";
            if (scene.choices) {
                showChoices(scene.choices);
                document.onclick = null;
            } else if (scene.next) {
                document.onclick = () => {
                    if (isTyping) return;
                    document.onclick = null;
                    loadScene(scene.next);
                };
            } else if (scene.end) {
                setTimeout(() => { alert(scene.endText); location.reload(); }, 2000);
            }
        }

        function saveGame() {
            localStorage.setItem("RUINS_SAVE", JSON.stringify({ scene: state, affection, route: currentRoute, playerName, date: new Date().toLocaleString() }));
            showToast("Jogo salvo!");
        }

        function loadGame() {
            const data = localStorage.getItem("RUINS_SAVE");
            if (!data) return showToast("Nenhum save encontrado.");
            const save = JSON.parse(data);
            affection = save.affection;
            currentRoute = save.route;
            playerName = save.playerName;
            state = save.scene;
            if (currentRoute) updateRoute(currentRoute);
            mainMenu.classList.add("hidden");
            document.querySelector(".game-controls").classList.remove("hidden");
            loadScene(save.scene);
            showToast("Jogo carregado!");
        }

        document.getElementById("startBtn").onclick = () => {
            playerName = document.getElementById("playerName").value.trim() || "Viajante";
            mainMenu.classList.add("hidden");
            document.querySelector(".game-controls").classList.remove("hidden");
            loadScene("cena1_1");
        };

        document.addEventListener("click", (e) => {
            if (e.target.closest(".choice") || e.target.closest(".control-btn") || e.target.id === "startBtn") return;
            const scene = routes[state];
            if (scene && scene.next && !isTyping && choicesBox.children.length === 0) loadScene(scene.next);
        });

        console.log("Second Chance - Ruins of Destiny");
        console.log("Manu&Sam Studios Â© 2026");
    </script>
</body>
</html>
